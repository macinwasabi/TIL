# 設計、開発手法

- [設計、開発手法](#設計開発手法)
  - [モデル駆動開発(MDD)](#モデル駆動開発mdd)
  - [ドメイン駆動開発(DDD)](#ドメイン駆動開発ddd)
    - [ドメイン](#ドメイン)
    - [ドメインモデル](#ドメインモデル)
    - [MDDとの違い](#mddとの違い)
    - [具体的な手法](#具体的な手法)
  - [テスト駆動開発(TDD)](#テスト駆動開発tdd)
  - [スキーマ駆動開発(SDD)](#スキーマ駆動開発sdd)
    - [SSKDs/LSUDs](#sskdslsuds)
    - [スキーマとは](#スキーマとは)
    - [スキーマの無い開発のスタイル](#スキーマの無い開発のスタイル)
      - [あるのは実装のみ](#あるのは実装のみ)
      - [実装とは別にドキュメントがある](#実装とは別にドキュメントがある)
      - [自動化されたテストがドキュメント代わり](#自動化されたテストがドキュメント代わり)
    - [スキーマ駆動開発とは](#スキーマ駆動開発とは)
      - [OpenAPIなど](#openapiなど)
        - [Swagger](#swagger)
        - [OpenAPI](#openapi)
        - [GraphQL](#graphql)
  - [WebAPI](#webapi)
    - [WebAPIとは](#webapiとは)
    - [RPC](#rpc)
    - [REST](#rest)
      - [RESTとは](#restとは)
      - [RESTful](#restful)
      - [WebAPIとの違い](#webapiとの違い)
      - [RPCとREST](#rpcとrest)


## モデル駆動開発(MDD)

[ドメインモデル](#ドメインモデル)の作成と利用を中心とする。UMLなどでモデルを作成し、そこからコードを自動生成するなど。
新しくない。2008~2017くらいの記事が多い。

## ドメイン駆動開発(DDD)

ビジネスドメインとソースコードの構造を一致させた開発のこと。

### ドメイン

領域の意味。対象、知識、ルール、問題、要求などのこと。
業務で扱う対象、業務知識、解決したい問題などソフトウェアを適用したい領域のこと。

### ドメインモデル

ドメインをオブジェクトのモデルとして表現したもの。

### MDDとの違い

MDDはドメインモデルをよりよく定義する方法よりも、技術の異なるプラットフォームに対してモデルをコードに変換する方法に関心がある。

### 具体的な手法

まずはドメインモデルを作る。
コーディングでは、従来のgetter/setterを持つだけのデータクラスは作らず(TODO:要調査)

## テスト駆動開発(TDD)

テストファーストで、まずテストを実装する。
必ず失敗して、赤色のエラーが出る。次に綺麗でなくていいので最低限のコードを書いてテストを成功させる。エラーが出なくなり、緑色になる。全てのテストが成功したらリファクタリングを行う。
レッド、グリーン、リファクタリングのステップがある。

## スキーマ駆動開発(SDD)

### SSKDs/LSUDs

Small Set of Known Developers/Large Set of Unknown Developers。よく知っている少数の開発者向けか、全く知らない大勢の開発者向けか、というお話。

以下はSSKDsなWebAPIの話。

### スキーマとは

その対象の「ありさま」を定められた形式で記述したもの。
APIのスキーマとは、URL、メソッド、リクエスト、レスポンスなどAPI仕様のこと。

### スキーマの無い開発のスタイル

- あるのは実装のみ
- 実装とは別にドキュメントがある
- 自動化されたテストがドキュメント代わり

#### あるのは実装のみ

実装だけがあって、ドキュメント類のものは無い。短所は挙動を読み解くコストが高い。

#### 実装とは別にドキュメントがある

ドキュメントのおかげで人間にとって分かりやすくなる。短所は実装とドキュメントの乖離が生じうる。コストをかけてドキュメントの同期、質をたんぽしていかなければならない。

#### 自動化されたテストがドキュメント代わり

実装と同期した、ドキュメント相当のものを得ることができる。短所はドキュメントほど読みやすくない。

### スキーマ駆動開発とは

最初のWeb APIの開発者と利用者が一緒にスキーマの設計を行う。これにより通常の開発ではWeb APIの利用者は開発者と並行して設計/実装を行える。
(利用者側で利用できるものが無いと利用者の実装はできないので、そこはスキーマを読み込んで動作するスタブサーバーを用意する。)
swagger, OpenAPIなどを使ってスキーマを作成し、そこからスタブサーバーを作成する。

#### OpenAPIなど

##### Swagger

REST APIのためのAPI使用であるSwagger Specificationや、それを元にしたツールSwagger Toolsがある。
Swagger SpecificationがOpenAPIに寄贈された現在では、Swagger Toolsのことを指すことが多そう。

Swagger Toolsにはスキーマを記述するSwagger Editor、記述されたスキーマをドキュメント化するSwagger UI、スキーマからソースコードを生成するSwagger Codegenなどがある。

##### OpenAPI

Swaggerの後継で、REST APIのためのAPI仕様。Swagger Toolsは引き続き使える。

TODO:どんな仕様？

##### GraphQL

TODO:要調査

## WebAPI

### WebAPIとは

- HTTPまたはHTTPSによって通信を行う
- 特定のHTTPメソッドを用いてアクセスできる
- 特定のURIにおいて提供される
- URIのクエリパラメータやHTTPリクエストボディに一貫した呼び出し方の決まりがある
- HTTPレスポンスのヘッダやボディの行元方法に一定の決まりがある

(TODO:要出典)

### RPC

遠隔手続き呼び出し(Remote Procedure Call)。プログラムから別ホストにある関数の呼び出しをすること。

### REST

#### RESTとは

REpresentation State Trasfer。RESTfulであるAPI。ROAの実装そのもの。

#### RESTful

RESTの規則に従っていること。以下は例だけど、まあROAだよねという感じ。

- URIに対してメソッドを送ることでサービスを得る
- ステートレスなクライアント/サーバープロトコル
- リソースを一意に識別する
- XMLやJSONなどの構造化テキストを返す

#### WebAPIとの違い

URLに動詞が入ること、/apiや/jsonなどの規格、アーキテクチャが入ること、バージョンが入ることなど、URLはリソースの住所であるべきなのに、他のものが入るのはRESTではない。

REST風ということでREST-ishと言うこともある。

#### RPCとREST

RPCとは「何をするか」を指定する。オブジェクト指向的に言うと、ウェブサーバーを通して公開される静的なインスタンスをURLを通じて発見し、そのメソッドを呼ぶ。

[RPC と REST の違いはなんですか?](https://aws.amazon.com/jp/compare/the-difference-between-rpc-and-rest/)
